{% extends 'base.html' %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'project_list_styles.css' %}">

<div class="project-documents-container">
    <h2>Документы по проекту "{{ document.project.name }}"</h2>

    <!-- Форма для загрузки документа -->
    <form class="document-upload-form" method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="form-group">
            <label for="document_type">Тип документа</label>
            <select id="document_type" name="document_type" class="form-control" required>
                <option value="">Выберите тип документа</option>
                {% for type, display_name in form.fields.document_type.choices %}
                    <option value="{{ type }}">{{ display_name }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group">
            <label for="file">Выберите файл</label>
            <input type="file" id="file" name="file" class="form-control" required>
        </div>
        <button type="submit" class="btn btn-primary">Загрузить документ</button>
    </form>

    <br>

    <!-- Отображение списка загруженных документов -->
    <h3>Загруженные документы</h3>
    <div class="documents-list">
        {% for document in documents %}
        <div class="document-item">
            <strong>{{ document.get_document_type_display }}</strong>
            <p>Дата загрузки: {{ document.uploaded_at }}</p>
            <a href="{{ document.file.url }}" class="btn btn-secondary" download>Скачать</a>
        </div>
        {% empty %}
        <p>Документы отсутствуют</p>
        {% endfor %}
    </div>
</div>

{% endblock %}